<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Webkit</title>
</head>
<body>

 <!--  <button>Say Hello World</button>
  <button>7805333</button>
  <button>search google cats and dogs</button>
  <button>check weather in san francisco</button>
  <button>shutdown in 30</button>
  <button>ten times five phrases</button> -->

  <button>kyle cho pro tip</button>
  <button>check the weather in San Francisco</button>
  <button>dim screen</button>
  <button>open sublime</button>



  <p id="print">Print to screen</p>
  <p id="json"></p>
  <input type="text" name="something" speech grammar="grammar.grxml" />
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <p id="save">Save to file</p>

  <script>
    (function(console){
      console.save = function(data, filename){
        if(!data) {
          console.error('Console.save: No data');
          return;
        }

        if(!filename) filename = 'console.json'
        for (var i = 0; i < array.length; i++) {
          array[i];
        }

      if(!filename) filename = 'console.json'

        if(typeof data === "object"){
          data = JSON.stringify(data, undefined, 4);
        }

<<<<<<< HEAD
      a.download = filename;
      a.href = window.URL.createObjectURL(blob);
      a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':');
      e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
      a.dispatchEvent(e);
     }
  })(console)
  //====Web Speech Audio======//
  var phrases = {
    "kyle cho pro tip": [],
    "check the weather in San Francisco" : [],
    "dim screen" : [],
    "open sublime" : []

    // "Say Hello World": [],
    // "7805333": [],
    // "search google cats and dogs": [],
    // "check weather in san francisco": [],
    // "shutdown in 30": [],
    // "ten times five phrases": []


  };
=======
        var blob = new Blob([data], {type: 'text/json'});
        var e = document.createEvent('MouseEvents');
        var a = document.createElement('a');
>>>>>>> master

        a.download = filename;
        a.href = window.URL.createObjectURL(blob);
        a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':');
        e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        a.dispatchEvent(e);
       }
    })(console)
    //====Web Speech Audio======//
    var phrases = {
      "Say Hello World": [],
      "7805333": [],
      "search google cats and dogs": [],
      "check weather in san francisco": [],
      "shutdown in 30": [],
      "ten times five phrases": []
    };
<<<<<<< HEAD
  }
  var button = $('button');
  var recordPhrase = function (p) {
    console.log("in recordPhrase");
    return function (event) {
      phrases[p].push(event);
      console.log(event);
=======

    if (!('webkitSpeechRecognition' in window)) {
      upgrade();
    } else {
      var recognition = new webkitSpeechRecognition();
      recognition.onresult = function(event) {
        record({
          score: event.results[0][0].confidence,
          term: event.results[0][0].transcript
        });
      };
    }
    var button = $('button');
    var recordPhrase = function (p) {
      return function (event) {
        phrases[p].push(event);
      };
>>>>>>> master
    };

    var record;

    $('#print').on('click', function () {
      // console.save(phrases);
      $('#json').text(JSON.stringify(phrases));
    });

  $('#print').on('click', function () {
  // console.log("clicked button print");

    $('#json').text(JSON.stringify(phrases));
  });

  $('#save').on('click', function () {
    console.save(phrases);
  });

  button.on('click', function () {
// console.log("clicked button record text");
    record = recordPhrase($(this).text());
    // console.log(record);
    recognition.start();
    console.log("recording started");
  });

    button.on('click', function () {
      record = recordPhrase($(this).text());
      recognition.start();
    });
  </script>
</body>
</html>
